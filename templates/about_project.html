<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>About The Project - Real Waste Classification System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- Added plugin for displaying data labels on the chart -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>    
  <script src="https://cdn.plot.ly/plotly-2.33.0.min.js"></script>
        
  <style>
    
    :root {
      --primary: #21c87a;
      --primary-dark: #1a2b3a;
      --secondary: #232b3b;
      --accent: #ffd600;
      --card-bg: #232b3b;
      --tab-bg: #1a2233;
      --text: #fff;
      --muted: #b0b8c1;
      --success: #21c87a;
      --danger: #ff5252;
    }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: linear-gradient(135deg, #1a2b3a 0%, #23404a 100%);
      margin: 0;
      padding: 0;
      color: var(--text);
      min-height: 100vh;
    }
    
    h2, p {
      margin: 10px;
    }
    
    .nav-container {
      display: flex;
      justify-content: center; /* Centers the <ul> horizontally */
      background: var(--tab-bg); /* Apply background to the full bar */
    }

    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      /* background: var(--tab-bg); */ /* <-- This was moved to .nav-container */
      display: flex;
    }

    ul li a {
      display: block;
      color: white;
      padding: 14px 16px;
      text-decoration: none;
    }

    /* Add spacing between menu items */
    .nav-container > ul > li {
        margin: 0 16px; /* Adds 16px space on left/right (increased from 8px) */
    }

    ul li a:hover:not(.active) {
      background: var(--secondary);
    }

    ul li a.active {
      background-color: #04AA6D;
    }
    
    /* === Dashboard Styles === */

    .simple-content {
        max-width: 1200px;
        margin: 38px auto;
        background: transparent; 
        border-radius: 18px;
        box-shadow: none;
        padding: 20px;
    }
    
    .simple-content h1 {
        color: var(--primary);
        text-align: center;
        font-size: 2.2rem;
        margin-bottom: 24px;
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); 
        gap: 24px;
    }

    .chart-card {
        background: var(--secondary);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .chart-card h3 {
        margin-top: 0;
        margin-bottom: 16px;
        color: var(--primary); /* This is your H3 color */
        font-weight: 600;
    }
    
    canvas {
        max-width: 100%;
        height: auto;
    }
    
    .grid-span-all {
        grid-column: 1 / -1;
    }

    .footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      font-size: 0.98rem;
      padding: 18px 0 12px 0;
    }
  </style>
 
</head>
<body>
  <div class="nav-container">      
    <ul>
      <li><a href="/">Home</a></li>      
      <li><a class="active" href="/about_project">Our Project</a></li> 
      <li><a href="/our_team">About Trio-Trashy</a></li>  
    </ul>
  </div>

  <div class="simple-content">    
    <div class="dashboard-grid">
      <div class="chart-card grid-span-all">
        <h1><i class="fa-solid fa-chart-line fa-sm" style="color:#21c87a;"></i>  Project Dashboard</h1><br/>

        <h3>About The Project</h3>
        <p>This project uses a TensorFlow Lite model to classify waste images in real-time.</p>
        <p>The system is built with a **Flask (Python)** backend to serve the model and a **React-inspired JavaScript** frontend for the user interface.</p>
        <p>Our goal is to promote proper recycling and reduce environmental impact through accessible AI.</p>
      </div>

      <div class="chart-card">
        <h3>Training vs Validation Loss</h3>
        <canvas id="lossChart"></canvas>
      </div>

      <div class="chart-card">
        <h3>Training vs Validation Accuracy</h3>
        <canvas id="accuracyChart"></canvas>
      </div>

      <!-- === NEW CONFUSION MATRIX CHART === -->
      <div class="chart-card grid-span-all">
        <h3>Confusion Matrix</h3>
        <div id="confusionMatrixChart" class="w-full min-h-[600px] sm:min-h-[750px]"></div>
      </div>

      <!-- === Model Accuracy (Training) CHART === -->      
      <div class="chart-card">
        <h3>Model Accuracy (Training)</h3>
        <canvas id="lineChart"></canvas>
      </div>

      <!-- === PER-CLASS ACCURACY CHART === -->
      <div class="chart-card">
        <h3>Per-Class Accuracy</h3>
        <canvas id="barChart"></canvas>
      </div>
    

    </div>
  </div>
  <div class="footer">
    &copy; 2025 Real Waste Classification System.<br>
    Bringing Machine Learning to sustainability for a cleaner, greener planet.<br>
    <i class="fa-solid fa-braille fa-sm" style="color: #06b259;"></i>  Developed & Designed by Trio-Trashy Team - AIS Semester 3, Year 2025
  </div>

  <script>
    (function() {
      // --- Register Datalabels plugin ---
      // This plugin is loaded from the new script tag in the <head>
      Chart.register(ChartDataLabels);

      // --- Set Chart.js defaults for dark theme ---
      Chart.defaults.color = '#9E9E9E'; 
      Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
      // Set datalabels defaults
      Chart.defaults.plugins.datalabels.color = 'black';
      Chart.defaults.plugins.datalabels.font = {
        weight: 'bold',
        size: 10
      };

      // =============================
      
      // === 1. Line Chart (Model Accuracy Training) ===
      const ctxLine = document.getElementById('lineChart').getContext('2d');
      new Chart(ctxLine, {
        type: 'line',
        data: {
          labels: ['Epoch 1', 'Epoch 4', 'Epoch 8', 'Epoch 12', 'Epoch 16', 'Epoch 20', 'Epoch 20', 'Epoch 24'],
          datasets: [{
            label: 'Accuracy',
            data: [75.88, 87.80, 70.2, 87.38, 88.08, 90.32, 90.46, 89.76],
            borderColor: 'var(--primary)',
            backgroundColor: 'rgba(33, 200, 122, 0.1)',
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },            
            title: { display: false },
            datalabels: { display: false } // Disable for this chart
          },
          scales: {
            y: {
              min: 50,
              max: 100,
              ticks: { 
                callback: (value) => value + '%',
                color: 'white' // <-- Add this line for Y-axis ticks
              },
              // Add grid color for consistency
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              }
            },
            // Add X-axis definition
            x: {
              ticks: {
                color: 'white' // <-- Add this for X-axis ticks
              },
              // Add grid color for consistency
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              }
            }
          }
        } 
         

      });


      // === Confusion Matrix Chart ===
      // const ctxconfusionMatrixChart = document.getElementById('confusionMatrixChart').getContext('2d');
      const labels = [
          'Cardboard', 'Food Organics', 'Glass', 'Metal', 
          'Miscellaneous Trash', 'Paper', 'Plastic', 'Textile Trash', 'Vegetation'
      ];

      // The 2D array of values (z-axis data)
      // Corresponds to z[true_label][predicted_label]
      const zData = [
          // Predicted ->
          // Card, Food, Glas, Metl, Misc, Papr, Plas, Text, Vege  (True)
          [63,    0,    1,    0,    2,    0,    3,    0,    0], // Cardboard
          [0,     55,   0,    0,    4,    1,    1,    0,    1], // Food Organics
          [1,     0,    61,   0,    0,    0,    1,    0,    0], // Glass
          [1,     0,    1,    102,  7,    0,    8,    0,    0], // Metal
          [0,     3,    0,    1,    54,   2,    4,    9,    1], // Misc. Trash
          [3,     0,    0,    0,    0,    69,   2,    1,    0], // Paper
          [0,     0,    9,    6,    1,    1,    121,  0,    0], // Plastic
          [0,     0,    0,    0,    1,    0,    1,    46,   0], // Textile Trash
          [0,     2,    0,    0,    0,    0,    0,    0,    63]  // Vegetation
      ];

      // --- Create Annotations (Text inside the cells) ---
      // We do this to control the text color based on the cell's background
      const annotations = [];
      // const threshold = 50; // No longer needed, we'll use dark text for all cells

      for (let i = 0; i < labels.length; i++) {
          for (let j = 0; j < labels.length; j++) {
              const value = zData[i][j];
              const annotation = {
                  // Position the text in the center of the cell
                  x: labels[j],
                  y: labels[i],
                  text: value,
                  showarrow: false,
                  font: {
                      // Forcing dark text for all cells for readability on a light blue scale
                      color: '#1f2937' // dark-gray-800
                  }
              };
              annotations.push(annotation);
          }
      }

      // --- Plotly Chart Definition ---
      // 1. The Data Trace (the heatmap itself)
      const data = [
          {
              z: zData,
              x: labels,
              y: labels,
              type: 'heatmap',
              // Define a custom light blue colorscale that avoids dark navy
              colorscale: [
                  [0.0, '#e6f7ff'], // very light blue for 0
                  [0.5, '#b3e0ff'], // light blue for midrange
                  [1.0, '#80ccff']  // baby blue for max
              ],
              reversescale: false,  // Light-to-dark 
              showscale: true,    // Show the color bar legend
              hoverongaps: false,
              // Custom tooltip text
              hovertemplate: '<b>True:</b> %{y}<br>' +
                              '<b>Predicted:</b> %{x}<br>' +
                              '<b>Count:</b> %{z}' +
                              '<extra></extra>' // Hides the default "trace" info
          }
      ];

      // 2. The Layout (titles, axes, etc.)
      const layout = {
          title: {
              text: 'Model Performance by Class',
              font: { color: '#1f2937' } // Dark text for light theme
          },
          annotations: annotations, // Add the text labels to the chart
          xaxis: {
              title: '<b>Predicted</b>',
              side: 'bottom', // Move x-axis labels to the bottom
              tickangle: -60,  // Angle the labels for readability
              automargin: true, // Automatically adjust margin for long labels
              titlefont: { color: '#111827' }, // Dark text
              tickfont: { color: '#374151' } // Muted dark text
          },
          yaxis: {
              title: '<b>True</b>',
              autorange: 'reversed', // Puts (0,0) at the top-left corner
              automargin: true,   // Automatically adjust margin
              titlefont: { color: '#111827' }, // Dark text
              tickfont: { color: '#374151' } // Muted dark text
          },
          // Add some padding
          margin: {
              l: 150, // Left margin for "Miscellaneous Trash"
              b: 150, // Bottom margin for angled labels
              t: 50,
              r: 50
          },
          paper_bgcolor: '#ffffff', // Background of the whole chart area
          plot_bgcolor: '#f9fafb'  // Background of the plot itself (light gray)
      };
      
      // 3. The Config (make it responsive)
      const config = {
          responsive: true
      };

      // 4. Render the chart
      // Plotly.newPlot('confusionMatrixChart', data, layout, config); // <-- This was the error
      Plotly.newPlot('confusionMatrixChart', data, layout, config); // <-- Corrected to target the <div> with id="chart"


      // === 4. LOSS CHART ===
      const ctxLoss = document.getElementById('lossChart').getContext('2d');
      
      // Create labels for Epochs 1 to 32
      const epochLabels = Array.from({ length: 32 }, (_, i) => i + 1);
      
      // Data extracted from your reference image
      const trainingLossData = [
        2.4, 1.3, 0.9, 0.6, 0.35, 0.28, 0.2, 0.15, 0.12, 0.1, 0.08, 0.06, 
        0.05, 0.04, 0.03, 0.02, 0.02, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01
      ];
      const validationLossData = [
        3.8, 4.6, 5.9, 4.8, 2.4, 1.2, 1.1, 1.15, 1.2, 1.25, 1.7, 1.2, 
        1.15, 1.15, 1.2, 1.25, 1.2, 1.15, 1.2, 1.15, 1.1, 1.15, 1.1, 
        1.1, 1.2, 1.2, 1.15, 1.15, 1.15, 1.15, 1.15, 1.15
      ];
      
      new Chart(ctxLoss, {
        type: 'line',
        data: {
          labels: epochLabels,
          datasets: [
            {
              label: 'Training Loss',
              data: trainingLossData,
              borderColor: '#3b82f6', // Blue color
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              tension: 0.1,
              pointStyle: 'circle',
              pointBackgroundColor: '#3b82f6'
            },
            {
              label: 'Validation Loss',
              data: validationLossData,
              borderColor: '#f97316', // Orange color
              backgroundColor: 'rgba(249, 115, 22, 0.1)',
              tension: 0.1,
              pointStyle: 'rect',
              pointBackgroundColor: '#f97316'
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top', // Show legend like in the image
              align: 'end',
              labels: { color: 'white' }
            },
            datalabels: { display: false } // Disable for this chart
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 6.5, // Set max to see the spike
              title: {
                display: true,
                text: 'Loss',
                color: 'white'
              },
              ticks: { color: 'white' }
            },
            x: {
              title: {
                display: true,
                text: 'Epoch',
                color: 'white'
              },
              ticks: {
                color: 'white',
                callback: function(value, index, values) {
                  return (index % 5 === 0) ? this.getLabelForValue(value) : '';
                }
              }
            }
          }
        }
      }); 


      // === 5. ACCURACY CHART ===
      const ctxAccuracy = document.getElementById('accuracyChart').getContext('2d');
      
      // Data extracted from your reference image
      const trainingAccuracyData = [
        0.41, 0.42, 0.56, 0.68, 0.77, 0.82, 0.89, 0.91, 0.93, 0.94, 0.95, 0.96, 
        0.97, 0.97, 0.98, 0.98, 0.98, 0.98, 0.99, 0.99, 0.99, 0.99, 0.99, 
        0.99, 0.99, 0.99, 0.99, 0.99, 0.99, 0.99, 0.99, 0.99
      ];
      const validationAccuracyData = [
        0.09, 0.09, 0.1, 0.25, 0.39, 0.62, 0.66, 0.68, 0.69, 0.67, 0.66, 0.65, 
        0.71, 0.71, 0.71, 0.71, 0.71, 0.72, 0.72, 0.73, 0.73, 0.72, 0.71, 
        0.72, 0.72, 0.72, 0.72, 0.72, 0.72, 0.72, 0.72, 0.71
      ];
      
      new Chart(ctxAccuracy, {
        type: 'line',
        data: {
          labels: epochLabels,
          datasets: [
            {
              label: 'Training Accuracy',
              data: trainingAccuracyData,
              borderColor: '#3b82f6', // Blue color
              backgroundColor: 'rgba(59, 130, 246, 0.1)',
              tension: 0.1,
              pointStyle: 'circle',
              pointBackgroundColor: '#3b82f6'
            },
            {
              label: 'Validation Accuracy',
              data: validationAccuracyData,
              borderColor: '#f97316', // Orange color
              backgroundColor: 'rgba(249, 115, 22, 0.1)',
              tension: 0.1,
              pointStyle: 'rect',
              pointBackgroundColor: '#f97316'
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top', 
              align: 'end',
              labels: { color: 'white' }
            },
            datalabels: { display: false } // Disable for this chart
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 1.05, // Max Y-axis at 1.05 (just over 1.0)
              title: {
                display: true,
                text: 'Accuracy',
                color: 'white'
              },
              ticks: { color: 'white' }
            },
            x: {
              title: {
                display: true,
                text: 'Epoch',
                color: 'white'
              },
              ticks: {
                color: 'white',
                callback: function(value, index, values) {
                  // Show labels for epochs 0, 5, 10, 15...
                  return (index % 5 === 0) ? this.getLabelForValue(value) : '';
                }
              }
            }
          }
        }
      });

      // === 5. PER-CLASS ACCURACY (NEW BAR CHART) ===
      const ctxBar = document.getElementById('barChart').getContext('2d');
      
      // Data from your new image
      const perClassLabels = [
          'Cardboard', 'Food Organics', 'Glass', 'Metal', 
          'Miscellaneous Trash', 'Paper', 'Plastic', 'Textile Trash', 'Vegetation'
      ];
      const perClassAccuracy = [
          0.92, 0.88, 0.97, 0.86, 0.73, 0.92, 0.88, 0.96, 0.97
      ];
      
      // Colors from the image (approximated)
      const perClassColors = [
          '#6A7FDB', // Cardboard
          '#7C92DF', // Food Organics
          '#B5C3E6', // Glass
          '#D1D9E8', // Metal
          '#E0E0E0', // Misc Trash
          '#F2E1D7', // Paper
          '#E9C8B5', // Plastic
          '#D99C8C', // Textile Trash
          '#C97064'  // Vegetation
      ];

      new Chart(ctxBar, {
        type: 'bar',
        data: {
          labels: perClassLabels,
          datasets: [{
            label: 'Accuracy',
            data: perClassAccuracy,
            backgroundColor: perClassColors,
            borderRadius: 4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            datalabels: { 
                display: false // Turned off for a cleaner look like the image
            } 
          },
          scales: {
            x: { 
                grid: { display: false },
                ticks: {
                    color:'white', // White text
                    maxRotation: 60, // Angle labels
                    minRotation: 60
                }
            },
            y: { 
                grid: { 
                    display: true,
                    color: 'rgba(255, 255, 255, 0.1)' // Light grid lines
                },
                ticks: { 
                    color: 'white', // White text
                    callback: (value) => value.toFixed(1) // 0.0, 0.2, ...
                },
                min: 0.0,
                max: 1.0,
                title: {
                    display: true,
                    text: 'Accuracy',
                    color:'white'
                }
            }
          }
        }
      });
       

    })();
  </script>

</body>
</html>