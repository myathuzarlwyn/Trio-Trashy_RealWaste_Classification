<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>About The Project - Real Waste Classification System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- Added plugin for displaying data labels on the chart -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>    
  <script src="https://cdn.plot.ly/plotly-2.33.0.min.js"></script>
        
  <style>
    
    :root {
      --primary: #21c87a;
      --primary-dark: #1a2b3a;
      --secondary: #232b3b;
      --accent: #ffd600;
      --card-bg: #232b3b;
      --tab-bg: #1a2233;
      --text: #fff;
      --muted: #b0b8c1;
      --success: #21c87a;
      --danger: #ff5252;
    }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      background: linear-gradient(135deg, #1a2b3a 0%, #23404a 100%);
      margin: 0;
      padding: 0;
      color: var(--text);
      min-height: 100vh;
    }

    h2, p {
      margin: 10px;
    }
    
    .nav-container {
      display: flex;
      justify-content: center; /* Centers the <ul> horizontally */
      background: var(--tab-bg); /* Apply background to the full bar */
    }

    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      /* background: var(--tab-bg); */ /* <-- This was moved to .nav-container */
      display: flex;
    }

    ul li a {
      display: block;
      color: white;
      padding: 14px 16px;
      text-decoration: none;
    }

    /* Add spacing between menu items */
    .nav-container > ul > li {
        margin: 0 16px; /* Adds 16px space on left/right (increased from 8px) */
    }

    ul li a:hover:not(.active) {
      background: var(--secondary);
    }

    ul li a.active {
      background-color: #04AA6D;
    }
    
    /* === Dashboard Styles === */

    .simple-content {
        max-width: 1200px;
        margin: 38px auto;
        background: transparent; 
        border-radius: 18px;
        box-shadow: none;
        padding: 20px;
    }
    
    .simple-content h1 {
        color: var(--primary);
        text-align: center;
        font-size: 2.2rem;
        margin-bottom: 24px;
    }

    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); 
        gap: 24px;
    }

    .chart-card {
        background: var(--secondary);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .chart-card h3 {
        margin-top: 0;
        margin-bottom: 16px;
        color: var(--primary); /* This is your H3 color */
        font-weight: 600;
    }
    
    canvas {
        max-width: 100%;
        height: auto;
    }
    
    .grid-span-all {
        grid-column: 1 / -1;
    }

    .footer {
      margin-top: 48px;
      text-align: center;
      color: var(--muted);
      font-size: 0.98rem;
      padding: 18px 0 12px 0;
    }
  </style>
 
</head>
<body>
  <div class="nav-container">      
    <ul>
      <li><a href="/">Home</a></li>      
      <li><a class="active" href="/about_project">Our Project</a></li> 
      <li><a href="/our_team">About Trio-Trashy</a></li>  
    </ul>
  </div>

  <div class="simple-content">    
    <div class="dashboard-grid">
      <div class="chart-card grid-span-all">
        <h1><i class="fa-solid fa-chart-line fa-sm" style="color:#21c87a;"></i>  Project Dashboard</h1><br/>
        <h3>About The Project</h3>
        <p>The RealWaste Web Application is an AI-powered image classification tool designed to help users identify different categories of waste using machine learning. 
          The system analyses an image uploaded by the user and predicts the correct waste category, supporting improved recycling and sustainability practices. 
          Click here: 
          <a href="static/docs/Trio-Trashy_ApplicationUserGuide.pdf" download style="color: #21c87a; text-decoration: none; font-weight: bold; display: inline-block; margin-top: 10px;">
            <i class="fa-solid fa-download"></i> &nbsp;Download User Guide
          </a>
        </p>
     
        <ul style="list-style-type: square; padding-left: 20px; line-height: 1.6; columns: 1; -webkit-columns: 1; -moz-columns: 1; display: block; width: 100%;">
          <li style="margin-bottom: 8px; padding-left: 5px;">Our goal is to promote proper recycling and reduce environmental impact through accessible AI.</li>
          <li style="margin-bottom: 8px; padding-left: 5px;">This project uses a TensorFlow Lite model to classify waste images in real-time and utilize OpenCV2 for image processing.</li>
          <li style="margin-bottom: 8px; padding-left: 5px;">The system is built with a Flask (Python) backend to serve the model and a React-inspired JavaScript frontend for the user interface. </li>
        </ul>
        <br/>
        
      </div>

      <!-- === LOSS CHART === -->
      <div class="chart-card">
        <h3>Training vs Validation Loss</h3>
        <canvas id="lossChart"></canvas>
      </div>

      <!-- === ACCURACY CHART === -->
      <div class="chart-card">
        <h3>Training vs Validation Accuracy</h3>
        <canvas id="accuracyChart"></canvas>
      </div>

      <!-- === CONFUSION MATRIX CHART === -->
      <div class="chart-card grid-span-all">
        <h3>Confusion Matrix</h3>
        <div id="confusionMatrixChart" class="w-full min-h-[600px] sm:min-h-[750px]"></div>
      </div>

      <!-- === MODEL ACCURACY TRAIING CHART === -->      
      <div class="chart-card">
        <h3>Model Accuracy (Training)</h3>
        <canvas id="lineChart"></canvas>
      </div>

      <!-- === PER-CLASS ACCURACY CHART === -->
      <div class="chart-card">
        <h3>Per-Class Accuracy</h3>
        <canvas id="barChart"></canvas>
      </div>
    
    </div>
  </div>
  <div class="footer">
    &copy; 2025 Real Waste Classification System.<br>
    Bringing Machine Learning to sustainability for a cleaner, greener planet.<br>
    <i class="fa-solid fa-braille fa-sm" style="color: #06b259;"></i>  Developed & Designed by Trio-Trashy Team - AIS Semester 3, Year 2025
  </div>

  <script>
    (function() {
      // --- Register Datalabels plugin ---
      // This plugin is loaded from the new script tag in the <head>
      Chart.register(ChartDataLabels);

      // --- Set Chart.js defaults for dark theme ---
      Chart.defaults.color = '#9E9E9E'; 
      Chart.defaults.borderColor = 'rgba(255, 255, 255, 0.1)';
      // Set datalabels defaults
      Chart.defaults.plugins.datalabels.color = 'black';
      Chart.defaults.plugins.datalabels.font = {
        weight: 'bold',
        size: 10
      };

      // =============================
      
      // === 1. LOSS CHART ===
      const ctxLoss = document.getElementById('lossChart').getContext('2d');
      
      // Use the same labels 0-23 as Accuracy
      const epochLabels = Array.from({ length: 24 }, (_, i) => i);       
      const trainingLossData = [
        1.18, 0.62, 0.46, 0.36, 0.29, 0.24, 0.20, 0.17, 0.16, 0.13, 
        0.10, 0.095, 0.10, 0.09, 0.07, 0.06, 0.07, 0.055, 0.05, 0.05, 
        0.04, 0.04, 0.04, 0.03
      ];
      const validationLossData = [
        0.74, 0.54, 0.43, 0.41, 0.40, 0.37, 0.35, 0.34, 0.39, 0.32, 
        0.33, 0.37, 0.31, 0.32, 0.31, 0.32, 0.35, 0.32, 0.28, 0.32, 
        0.41, 0.30, 0.30, 0.31
      ];
      
      new Chart(ctxLoss, {
        type: 'line',
        data: {
          labels: epochLabels,
          datasets: [
            {
              label: 'Training Loss',
              data: trainingLossData,
              borderColor: '#1f77b4', // Standard Blue (same as accuracy chart)
              backgroundColor: 'rgba(31, 119, 180, 0.1)',
              tension: 0.1,
              pointStyle: 'circle', // Circle points
              pointRadius: 4,
              pointBackgroundColor: '#1f77b4'
            },
            {
              label: 'Validation Loss',
              data: validationLossData,
              borderColor: '#008000', // Green (Changed from Orange as requested)
              backgroundColor: 'rgba(0, 128, 0, 0.1)',
              tension: 0.1,
              pointStyle: 'rect', // Square points
              pointRadius: 4,
              pointBackgroundColor: '#008000'
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              position: 'top',
              align: 'end', // Right aligned like the image
              labels: { color: 'white' }
            },
            datalabels: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 1.25, // Slightly above the max value (1.18)
              title: {
                display: true,
                text: 'Loss',
                color: 'white'
              },
              ticks: { 
                color: 'white',
                stepSize: 0.2
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.2)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Epoch',
                color: 'white'
              },
              ticks: {
                color: 'white',
                callback: function(value, index, values) {
                  return (index % 5 === 0) ? this.getLabelForValue(value) : '';
                }
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.2)'
              }
            }
          }
        }
      }); 

     

      // === 2. ACCURACY CHART ===
      const ctxAccuracy = document.getElementById('accuracyChart').getContext('2d');      
      const accuracyEpochLabels = Array.from({ length: 24 }, (_, i) => i); // 0 to 23
      
      const trainingAccuracyData = [
        0.615, 0.79, 0.845, 0.885, 0.905, 0.92, 0.935, 0.948, 0.95, 0.96, 
        0.97, 0.971, 0.969, 0.971, 0.979, 0.979, 0.976, 0.982, 0.985, 0.985, 
        0.987, 0.988, 0.987, 0.992
      ];
      
      const validationAccuracyData = [
        0.76, 0.805, 0.845, 0.88, 0.85, 0.872, 0.872, 0.875, 0.871, 0.894, 
        0.891, 0.881, 0.884, 0.889, 0.897, 0.904, 0.884, 0.891, 0.910, 0.905, 
        0.884, 0.901, 0.894, 0.898
      ];
      
      new Chart(ctxAccuracy, {
        type: 'line',
        data: {
          labels: accuracyEpochLabels, // Using 0-23 labels
          datasets: [
            {
              label: 'Training Accuracy',
              data: trainingAccuracyData,
              borderColor: '#1f77b4', // Standard matplotlib Blue
              backgroundColor: 'rgba(31, 119, 180, 0.1)',
              tension: 0.1,
              pointStyle: 'circle',
              pointRadius: 4,
              pointBackgroundColor: '#1f77b4'
            },
            {
              label: 'Validation Accuracy',
              data: validationAccuracyData,
              borderColor: '#008000', // Green to match image
              backgroundColor: 'rgba(0, 128, 0, 0.1)',
              tension: 0.1,
              pointStyle: 'rect', // Square points to match image
              pointRadius: 4,
              pointBackgroundColor: '#008000'
            }
          ]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top', 
              align: 'start', // Left aligned like the image
              labels: { color: 'white' }
            },
            datalabels: { display: false }
          },
          scales: {
            y: {
              min: 0.60, // Start at 0.60
              max: 1.01, // Go slightly above 1.0
              title: {
                display: true,
                text: 'Accuracy',
                color: 'white'
              },
              ticks: { 
                color: 'white',
                stepSize: 0.05
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.2)'
              }
            },
            x: {
              title: {
                display: true,
                text: 'Epoch',
                color: 'white'
              },
              ticks: {
                color: 'white',
                callback: function(value, index, values) {
                  return (index % 5 === 0) ? this.getLabelForValue(value) : '';
                }
              },
              grid: {
                color: 'rgba(255, 255, 255, 0.2)'
              }
            }
          }
        }
      });


      // === 3. Confusion Matrix Chart ===
      // const ctxconfusionMatrixChart = document.getElementById('confusionMatrixChart').getContext('2d');
      const labels = [
          'Cardboard', 'Food Organics', 'Glass', 'Metal', 
          'Miscellaneous Trash', 'Paper', 'Plastic', 'Textile Trash', 'Vegetation'
      ];

      // The 2D array of values (z-axis data)
      const zData = [
          // Predicted ->
          // Card, Food, Glas, Metl, Misc, Papr, Plas, Text, Vege  (True)
          [63,    0,    1,    0,    2,    0,    3,    0,    0], // Cardboard
          [0,     55,   0,    0,    4,    1,    1,    0,    1], // Food Organics
          [1,     0,    61,   0,    0,    0,    1,    0,    0], // Glass
          [1,     0,    1,    102,  7,    0,    8,    0,    0], // Metal
          [0,     3,    0,    1,    54,   2,    4,    9,    1], // Misc. Trash
          [3,     0,    0,    0,    0,    69,   2,    1,    0], // Paper
          [0,     0,    9,    6,    1,    1,    121,  0,    0], // Plastic
          [0,     0,    0,    0,    1,    0,    1,    46,   0], // Textile Trash
          [0,     2,    0,    0,    0,    0,    0,    0,    63]  // Vegetation
      ];

      // --- Create Annotations (Text inside the cells) ---
      const annotations = [];
      for (let i = 0; i < labels.length; i++) {
          for (let j = 0; j < labels.length; j++) {
              const value = zData[i][j];
              const annotation = {
                  // Position the text in the center of the cell
                  x: labels[j],
                  y: labels[i],
                  text: value,
                  showarrow: false,
                  font: {
                      // Forcing dark text for all cells for readability on a light blue scale
                      color: '#1f2937' // dark-gray-800
                  }
              };
              annotations.push(annotation);
          }
      }

      // --- Plotly Chart Definition ---
      // 1. The Data Trace (the heatmap itself)
      const data = [
          {
              z: zData,
              x: labels,
              y: labels,
              type: 'heatmap',
              // Define a custom light blue colorscale that avoids dark navy
              colorscale: [
                  [0.0, '#e6f7ff'], // very light blue for 0
                  [0.5, '#b3e0ff'], // light blue for midrange
                  [1.0, '#80ccff']  // baby blue for max
              ],
              reversescale: false,  // Light-to-dark 
              showscale: true,    // Show the color bar legend
              hoverongaps: false,
              // Custom tooltip text
              hovertemplate: '<b>True:</b> %{y}<br>' +
                              '<b>Predicted:</b> %{x}<br>' +
                              '<b>Count:</b> %{z}' +
                              '<extra></extra>' // Hides the default "trace" info
          }
      ];

      // 2. The Layout (titles, axes, etc.)
      const layout = {
          title: {
              text: 'Model Performance by Class',
              font: { color: '#1f2937' } // Dark text for light theme
          },
          annotations: annotations, // Add the text labels to the chart
          xaxis: {
              title: '<b>Predicted</b>',
              side: 'bottom', // Move x-axis labels to the bottom
              tickangle: -60,  // Angle the labels for readability
              automargin: true, // Automatically adjust margin for long labels
              titlefont: { color: '#111827' }, // Dark text
              tickfont: { color: '#374151' } // Muted dark text
          },
          yaxis: {
              title: '<b>True</b>',
              autorange: 'reversed', // Puts (0,0) at the top-left corner
              automargin: true,   // Automatically adjust margin
              titlefont: { color: '#111827' }, // Dark text
              tickfont: { color: '#374151' } // Muted dark text
          },
          // Add some padding
          margin: {
              l: 150, // Left margin for "Miscellaneous Trash"
              b: 150, // Bottom margin for angled labels
              t: 50,
              r: 50
          },
          paper_bgcolor: '#ffffff', // Background of the whole chart area
          plot_bgcolor: '#f9fafb'  // Background of the plot itself (light gray)
      };
      
      // 3. The Config (make it responsive)
      const config = {
          responsive: true
      };

      Plotly.newPlot('confusionMatrixChart', data, layout, config); // <-- Corrected to target the <div> with id="chart"

      
      // === 4. Line Chart (Model Accuracy Training) ===
      const ctxLine = document.getElementById('lineChart').getContext('2d');
      new Chart(ctxLine, {
        type: 'line',
        data: {
          labels: ['Epoch 1', 'Epoch 4', 'Epoch 8', 'Epoch 12', 'Epoch 16', 'Epoch 20', 'Epoch 20', 'Epoch 24'],
          datasets: [{
            label: 'Accuracy',
            data: [75.88, 87.80, 70.2, 87.38, 88.08, 90.32, 90.46, 89.76],
            borderColor: '#008000',
            backgroundColor: 'rgba(33, 200, 122, 0.1)',
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },            
            title: { display: false },
            datalabels: { display: false } // Disable for this chart
          },
          scales: {
            y: {
              min: 50,
              max: 100,
              ticks: { 
                callback: (value) => value + '%',
                color: 'white' // <-- Add this line for Y-axis ticks
              },
              // Add grid color for consistency
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              }
            },
            // Add X-axis definition
            x: {
              ticks: {
                color: 'white' // <-- Add this for X-axis ticks
              },
              // Add grid color for consistency
              grid: {
                color: 'rgba(255, 255, 255, 0.1)'
              }
            }
          }
        } 
         

      });

      // === 5. PER-CLASS ACCURACY (NEW BAR CHART) ===
      const ctxBar = document.getElementById('barChart').getContext('2d');      
      const perClassLabels = [
          'Cardboard', 'Food Organics', 'Glass', 'Metal', 
          'Miscellaneous Trash', 'Paper', 'Plastic', 'Textile Trash', 'Vegetation'
      ];
      const perClassAccuracy = [
          0.92, 0.88, 0.97, 0.86, 0.73, 0.92, 0.88, 0.96, 0.97
      ];
      
      // Colors from the image (approximated)
      const perClassColors = [
          '#6A7FDB', // Cardboard
          '#7C92DF', // Food Organics
          '#B5C3E6', // Glass
          '#D1D9E8', // Metal
          '#E0E0E0', // Misc Trash
          '#F2E1D7', // Paper
          '#E9C8B5', // Plastic
          '#D99C8C', // Textile Trash
          '#C97064'  // Vegetation
      ];

      new Chart(ctxBar, {
        type: 'bar',
        data: {
          labels: perClassLabels,
          datasets: [{
            label: 'Accuracy',
            data: perClassAccuracy,
            backgroundColor: perClassColors,
            borderRadius: 4
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            datalabels: { 
                display: false // Turned off for a cleaner look like the image
            } 
          },
          scales: {
            x: { 
                grid: { display: false },
                ticks: {
                    color:'white', // White text
                    maxRotation: 60, // Angle labels
                    minRotation: 60
                }
            },
            y: { 
                grid: { 
                    display: true,
                    color: 'rgba(255, 255, 255, 0.1)' // Light grid lines
                },
                ticks: { 
                    color: 'white', // White text
                    callback: (value) => value.toFixed(1) // 0.0, 0.2, ...
                },
                min: 0.0,
                max: 1.0,
                title: {
                    display: true,
                    text: 'Accuracy',
                    color:'white'
                }
            }
          }
        }
      });
       

    })();
  </script>

</body>
</html>